<div class="agent-form-container">
	<div class="header">
		<h1>{{ isEditMode ? ('AGENTS.EDIT_AGENT' | translate) : ('AGENTS.CREATE_NEW_AGENT' | translate) }}</h1>
	</div>

	<div class="loading-indicator" *ngIf="loading">
		<p>{{ isEditMode ? ('AGENTS.LOADING_AGENT' | translate) : ('AGENTS.CREATING_AGENT' | translate) }}</p>
	</div>

	<div class="error-message" *ngIf="saveError">
		<p>{{ saveError | translate }}</p>
	</div>

	<form [formGroup]="agentForm" (ngSubmit)="onSubmit()" *ngIf="!loading || isEditMode">
		<div class="form-group">
			<label for="name">{{ 'AGENTS.AGENT_NAME' | translate }}</label>
			<input type="text" id="name" formControlName="name" [placeholder]="'AGENTS.ENTER_AGENT_NAME' | translate" />
			<div
				class="validation-error"
				*ngIf="agentForm.get('name')?.invalid && agentForm.get('name')?.touched"
			>
				<p *ngIf="agentForm.get('name')?.errors?.['required']">{{ 'AGENTS.NAME_REQUIRED' | translate }}</p>
				<p *ngIf="agentForm.get('name')?.errors?.['minlength']">
					{{ 'AGENTS.NAME_MIN_LENGTH' | translate }}
				</p>
				<p *ngIf="agentForm.get('name')?.errors?.['maxlength']">
					{{ 'AGENTS.NAME_MAX_LENGTH' | translate }}
				</p>
			</div>
		</div>

		<div class="form-group">
			<label for="department">{{ 'AGENTS.DEPARTMENT' | translate }}</label>
			<input type="text" id="department" formControlName="department" [placeholder]="'AGENTS.ENTER_DEPARTMENT' | translate" />
			<div
				class="validation-error"
				*ngIf="agentForm.get('department')?.invalid && agentForm.get('department')?.touched"
			>
				<p *ngIf="agentForm.get('department')?.errors?.['required']">{{ 'AGENTS.DEPARTMENT_REQUIRED' | translate }}</p>
				<p *ngIf="agentForm.get('department')?.errors?.['minlength']">
					{{ 'AGENTS.DEPARTMENT_MIN_LENGTH' | translate }}
				</p>
				<p *ngIf="agentForm.get('department')?.errors?.['maxlength']">
					{{ 'AGENTS.DEPARTMENT_MAX_LENGTH' | translate }}
				</p>
			</div>
		</div>

		<div class="form-group">
			<label for="description">{{ 'AGENTS.AGENT_DESCRIPTION' | translate }} ({{ 'AGENTS.OPTIONAL' | translate }})</label>
			<textarea
				id="description"
				formControlName="description"
				[placeholder]="'AGENTS.DESCRIBE_AGENT' | translate"
				rows="4"
			></textarea>
			<div
				class="validation-error"
				*ngIf="
					agentForm.get('description')?.invalid && agentForm.get('description')?.touched
				"
			>
				<p *ngIf="agentForm.get('description')?.errors?.['maxlength']">
					{{ 'AGENTS.DESCRIPTION_MAX_LENGTH' | translate }}
				</p>
			</div>
		</div>

		<div class="form-group">
			<label for="instructions">{{ 'AGENTS.INSTRUCTIONS' | translate }} ({{ 'AGENTS.OPTIONAL' | translate }})</label>
			<textarea
				id="instructions"
				formControlName="instructions"
				[placeholder]="'AGENTS.ENTER_INSTRUCTIONS' | translate"
				rows="6"
			></textarea>
			<div
				class="validation-error"
				*ngIf="
					agentForm.get('instructions')?.invalid && agentForm.get('instructions')?.touched
				"
			>
				<p *ngIf="agentForm.get('instructions')?.errors?.['maxlength']">
					{{ 'AGENTS.INSTRUCTIONS_MAX_LENGTH' | translate }}
				</p>
			</div>
			<div class="helper-text">
				<p>{{ 'AGENTS.INSTRUCTIONS_HELP' | translate }}</p>
			</div>
		</div>

		<div class="form-actions">
			<button type="button" class="cancel-button" (click)="cancel()">{{ 'COMMON.CANCEL' | translate }}</button>
			<button type="submit" class="save-button" [disabled]="agentForm.invalid || loading">
				{{ isEditMode ? ('AGENTS.SAVE_CHANGES' | translate) : ('AGENTS.CREATE_AGENT' | translate) }}
			</button>
		</div>
	</form>
</div>
