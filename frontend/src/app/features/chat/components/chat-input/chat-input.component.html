<div class="chat-input-container">
	<div class="main-input-area">
		<textarea
			#promptInput
			class="message-textarea"
			[placeholder]="'CHAT.TYPE_MESSAGE' | translate"
			[value]="messageText()"
			(input)="onMessageTextChanged($event)"
			(keydown)="onKeyDown($event)"
			[disabled]="disabled() || isEnhancing()"
			rows="1"
		></textarea>
		<div class="input-actions">
			<button class="action-btn" [title]="'CHAT.ATTACH_FILE' | translate">
				<img src="assets/icons/attach-file.svg" alt="" />
			</button>
			<div class="voice-actions">
				@if(isSpeechSupported) {
				<button
					(click)="toggleListening()"
					[title]="
						(isListening() ? 'CHAT.STOP_LISTENING' : 'CHAT.START_LISTENING') | translate
					"
					class="icon-button action-btn"
					[class.listening]="isListening()"
				>
					<img src="assets/icons/mic.svg" alt="Microphone Icon" />
				</button>
				}
			</div>
			<button class="action-btn" [title]="'CHAT.ADD_IMAGE' | translate">
				<img src="assets/icons/image.svg" alt="" />
			</button>
			<button
				class="send-btn"
				[disabled]="!messageText().trim() || disabled() || isEnhancing()"
				(click)="onSendClick()"
				[title]="'CHAT.SEND_MESSAGE' | translate"
			>
				<img src="assets/icons/send.svg" alt="" />
			</button>
		</div>
	</div>
	<div class="formatting-toolbar">
		<div class="format-actions">
			<button class="format-btn" [title]="'CHAT.FORMAT_CODE' | translate">
				<img src="assets/icons/code.svg" alt="" />
				<span>{{ 'CHAT.CODE_FORMAT' | translate }}</span>
			</button>
			<button class="format-btn" [title]="'CHAT.FORMAT_TABLE' | translate">
				<img src="assets/icons/table.svg" alt="" />
				<span>{{ 'CHAT.TABLE_FORMAT' | translate }}</span>
			</button>
			<button class="format-btn" [title]="'CHAT.FORMAT_LIST' | translate">
				<img src="assets/icons/list.svg" alt="" />
				<span>{{ 'CHAT.LIST_FORMAT' | translate }}</span>
			</button>
		</div>
		<div class="response-note">
			<span>{{ 'CHAT.AGENT_RESPONSE_NOTE' | translate }}</span>
		</div>
	</div>
</div>
